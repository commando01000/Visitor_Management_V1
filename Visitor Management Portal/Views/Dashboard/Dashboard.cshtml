@model Visitor_Management_Portal.ViewModels.Analisis.DashboardNumbers

@{
    ViewBag.Title = "Dashboard";

}
@section styles{
    <link rel="stylesheet" href="~/Content/Dashboard/Index/DashboardV3.css" />
}
<div class="dashboard-section-container container">
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card custom-card">
                <div class="stat-number">@Model.Total_Visits</div>
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-dark mt-2">Total Visits</p>
                    <a href="#" class="arrow-icon-dashboard">
                        <i class="fa-solid fa-arrow-right arrow-icon"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card custom-card">
                <div class="stat-number">@Model.Active_Visits</div>
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-dark mt-2">Active Visits</p>
                    <a href="#" class="arrow-icon-dashboard">
                        <i class="fa-solid fa-arrow-right arrow-icon"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card custom-card">
                <div class="stat-number">@Model.Active_Visitors</div>
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-dark mt-2">Active Visitors</p>
                    <a href="#" class="arrow-icon-dashboard">
                        <i class="fa-solid fa-arrow-right arrow-icon"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card custom-card">
                <div class="stat-number">@Model.Active_Users / <span class="text-muted">@Model.Total_Users</span></div>
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-dark mt-2">Active Users</p>
                    <a href="#" class="arrow-icon-dashboard">
                        <i class="fa-solid fa-arrow-right arrow-icon"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-4">
        <!-- 1st Card -->
        <div class="col-md-3">
            <div class="card custom-card">
                <div class="d-flex justify-content-between align-items-center mb-0">
                    <h6 class="fw-bold">Total Visits</h6>
                    <!-- Select Input -->
                    <select class="select-input-dashboard ms-auto" id="totalVisits-selectInput">
                        <option style="display:none;" value="-1">NAN</option>
                        <option selected value="1">This Week</option>
                        <option value="2">This Month</option>
                        @*<option value="3">This Year</option>*@
                    </select>
                </div>
                <div id="total-visits-empty">
                    <div class="d-flex justify-content-center align-items-center vh-100 pending-approval-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/chart.svg" class="total-visits-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No visits recorded yet. Stats will appear here once visitors start checking in
                            </p>
                        </div>
                    </div>
                    <div class="mb-3"></div>
                </div>
                <div id="total-visits-data">
                    <div class="mt-2 stat-number-not-bold" id="total-visits-for-this-period">NA</div>
                    <div id="date-range" class="mt-2 mb-3 text-muted">NA</div>
                    <div id="total-visits" class="mt-2 mb-0"></div>
                </div>
            </div>
        </div>
        <!-- 2nd Card -->
        <div class="col-md-3">
            <!-- Card Header -->
            <div class="card custom-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold">Visit by department</h6>
                    <!-- Select Input -->
                    <select class="select-input-dashboard ms-auto" id="visitsDepartment-selectInput">
                        <option value="0" selected>Today</option>
                        <option value="1">This Week</option>
                        <option value="2">This Month</option>
                        <option value="3">This Year</option>
                    </select>
                </div>

                <div id="department-visits-empty">
                    <div class="d-flex justify-content-center align-items-center vh-100 pending-approval-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/users.svg" class="department-visits-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No department visits yet. Keep an eye here for department-specific insights
                            </p>
                        </div>
                    </div>
                </div>
                <div id="department-visits-data">
                    <div id="chart-Visits-by-department" class="mb-5"></div>
                    <div class="mb-0" style="height: 10px;"></div>
                    <div class="container mt-2 mb-2">
                        <div class="labels-department-chart-card">
                            <!-- the lebals will be added dynamically -->
                        </div>
                    </div>
                    <div class="mb-3" style="height: 10px;"></div>
                </div>
            </div>
        </div>
        <!-- 3rd Card -->
        <div class="col-md-3">
            <!-- Card Header -->
            <div class="card custom-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold">Visits by purpose</h6>
                    <!-- Select Input -->
                    <select id="purpose-selectInput" class="select-input-dashboard ms-auto">
                        <option value="0" selected>Today</option>
                        <option value="1">This Week</option>
                        <option value="2">This Month</option>
                        <option value="3">This Year</option>
                    </select>
                </div>
                <div id="purpose-visits-empty">
                    <div class="d-flex justify-content-center align-items-center vh-100 pending-approval-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/goal.svg" class="purpose-visits-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No visits with a specific purpose yet. This section will update soon
                            </p>
                        </div>
                    </div>
                </div>

                <div id="purpose-visits-data">
                    <div id="chart-Visits-by-purpose" class="mb-0"></div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <div>
                                <span class="fw-bold">Meeting</span>
                                <span class="text-muted ms-2" id="Meeting-value">&nbsp;0</span>
                            </div>
                            <div>
                                <span class="fw-bold">Emergancy</span>
                                <span class="text-muted ms-2" id="Emergancy-value">0</span>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <div>
                                <span class="fw-bold">Interview</span>
                                <span class="text-muted ms-2" id="Interview-value">0</span>
                            </div>
                            <div>
                                <span class="fw-bold">Other</span>
                                <span class="text-muted ms-2" id="Other-value">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3" style="height: 10px;"></div>
                </div>
            </div>
        </div>
        <!-- 4th Card -->
        <div class="col-md-3">
            <!-- Card Header -->
            <div class="card custom-card-peak-time">
                <div class="d-flex justify-content-between align-items-center mb-0">
                    <h6 class="fw-bold">Peak time</h6>
                    <!-- Select Input -->
                    <select class="select-input-dashboard ms-auto" id="peakTime-selectInput">
                        <option value="0" selected>Today</option>
                        <option value="1">This Week</option>
                        <option value="2">This Month</option>
                        <option value="3">This Year</option>
                    </select>
                </div>

                <div id="Peak-time-empty">
                    <div class="d-flex justify-content-center align-items-center vh-100 pending-approval-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/clock.svg" class="Peak-time-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No peak time data yet. This will update as visitors check in throughout the day
                            </p>
                        </div>
                    </div>
                    <div class="mb-3"></div>
                </div>

                <div id="Peak-time-data">
                    <div id="Peak-time"></div>
                    <div class="row text-center mt-0">
                        <div class="col-md-6 p-1">
                            <div class="bg-white">
                                <br />
                                <h6 class="stat-number-not-bold mb-1" id="peak-time-max">NA</h6>
                                <small class="text-muted">Peak time</small>
                                <div><br /></div>
                            </div>
                        </div>
                        <div class="col-md-6 p-1">
                            <div class="bg-white">
                                <br />
                                <h6 class="stat-number-not-bold mb-1" id="max-visitors-number">NA</h6>
                                <small class="text-muted">Visitor</small>
                                <div><br /></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <!-- Visit requests by location -->
        <div class="col-md-6">
            <div class="card custom-card">
                <!-- Card Header -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold">Visit requests by location</h6>
                    <!-- Select Input -->
                    <select class="select-input-dashboard ms-auto" id="visitsByLocation-selectInput">
                        <option value="0" selected>Today</option>
                        <option value="1">This Week</option>
                        <option value="2">This Month</option>
                        <option value="3">This Year</option>
                    </select>
                </div>
                <div id="location-empty">
                    <div class="d-flex justify-content-center align-items-center vh-100 location-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/map-pin.svg" class="location-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No visits recorded in any location yet. Check back later for updates.
                            </p>
                        </div>
                    </div>
                </div>
                <div id="location-data">
                    <div id="chart-Visit-requests-by-location"></div>
                    <div class="row p-0 mb-0">
                        <div class="col-md-4 p-1" id="Busiest-Area-Card-1">
                            <div class="Busiest-custom-card">
                                <h6 class="fw-bold">Busiest Areas</h6>
                                <div id="Busiest-Area-Data-1">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 p-1" id="Busiest-Area-Card-2">
                            <div class="Busiest-custom-card">
                                <h6 class="fw-bold"><br /></h6>
                                <div id="Busiest-Area-Data-2">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 p-1" id="Busiest-Area-Card-3">
                            <div class="Busiest-custom-card">
                                <h6 class="fw-bold"><br /></h6>
                                <div id="Busiest-Area-Data-3">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Top Visitors -->
        <div class="col-md-3">
            <div class="card custom-card">
                <!-- Card Header -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold">Top Visitors</h6>
                    <!-- Select Input -->
                    <select class="select-input-dashboard ms-auto" id="topVistors-selectInput">
                        <option value="0" selected>Today</option>
                        <option value="1">This Week</option>
                        <option value="2">This Month</option>
                        <option value="3">This Year</option>
                    </select>
                </div>

                <div id="top-visitors-empty">
                    <div class="d-flex justify-content-center align-items-center vh-100 top-visitors-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/favorite.svg" class="top-visitor-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No frequent visitors yet. A list will appear here once recurring visits are logged
                            </p>
                        </div>
                    </div>
                </div>
                <!-- Visitor List -->
                <div id="top-visitor-data" class="visitor-list">

                </div>
            </div>
        </div>
        <!-- Pending approval visit requests -->
        <div class="col-md-3">
            <!-- Pending approval visit requests -->
            <div class="card custom-card">
                <h6 class="fw-bold">Pending approval visit requests</h6>
                <div id="pending-approval-empty" class="mt-3">
                    <div class="d-flex justify-content-center align-items-center vh-100 pending-approval-empty-state">
                        <div class="card card-custom-empty-state text-center p-4">
                            <img src="~/Content/Images/DashboardEmptyStates/visiting-card.svg" class="top-visitor-icon mx-auto d-block" />
                            <p class="text-muted-custom mt-3">
                                No pending visit requests. Everything is up to date
                            </p>
                        </div>
                    </div>
                </div>
                <ul class="list-unstyled mt-3" id="pending-approval-visits-requests-contanier">
                </ul>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        const list_Item = document.querySelector(".sidebar-menu .dashboard")
        list_Item.classList.add('active-sidebar-menu');
    </script>

    <script src="~/Content/Dashboard/Index/HeightAdjsetemnt.js"></script>
    <script src="~/Content/Dashboard/Index/DashboardCharts.js"></script>
    <script src="~/Content/Dashboard/Index/ListsHandling.js"></script>
}